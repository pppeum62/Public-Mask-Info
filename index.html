<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Public Mask Info - 공적 마스크 정보</title>
        <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
        <style>
            /* reset */
            body { margin: 0; padding: 0; }

            /* 지도 */
            .map_wrap { position: relative; }
            .map { width: 100%; height: 100vh; }

            /* 마커 색 안내 탭 */
            .info { border-radius: 5px; border:1px solid #909090; position: absolute; z-index: 2; padding: 0px; background: #fff; width: 155px; overflow: hidden; top: 0; left: 15px; }
            .info li { float: left; list-style: none; padding: 6px; width: 100%; border-bottom: 1px solid #acacac; display: flex; cursor: pointer; }
            .info li:last-child { border-bottom: 0; }
            .info li:hover { background: #ECF8FF; }
            .info li img { width: 20px; padding-right: 13px; }
            .mask-check-msg { display: none; }
            .mask-chk { padding: 6px 8px; cursor: pointer; display: flex; align-items: center; }
            .mask-chk:hover { background: #ECF8FF; }
            .mask-chk:hover .mask-check-msg { display: block; }
            .mask-chk:hover .hid { display: none; }
            .mask-chk img { width: 18px; }
            
            /* 검색바 */
            .search-warp { position:absolute; z-index: 2; top: 10px; right: 10px; display: flex; border: none; }
            .search { border: 1px solid #909090; border-radius: 40px; background-color: #fff; width: 20vw; height: 5vh; align-items: center; justify-content: center; display: flex; }
            .search .place { width: 80%; height: 90%; padding-left: 5px; padding: 2px; border-radius: 24px; border: none; }
            .search .place:focus { outline: none; }
            .search-btn { align-items: center; width: 18px; height: 18px; }
            .search-btn img { width: 18px; height: 18px; }
            button { all: unset; cursor: pointer; }

            /* 마스크 구매 가능 여부 확인창 */
            .check-bg { width: 100%; height: 100vh; background: rgba(255, 255, 255, 0.5); position: absolute; z-index: 3; }
            .check { transform: translate(-50%, -50%); top: 50%; left: 50%; width: 300px; height: 220px; position: absolute; z-index: 4; background: #fff; border-radius: 30px; box-shadow: 0 5px 5px #ddd; }
            .check-header { border-radius: 30px 30px 0 0; background-color: #00AF80; width: 300px; height: 60px; position: relative; display: flex; align-items: center; justify-content: center; }
            .header-msg { color: #fff; font-size: 14px; padding-right: 10px; font-weight: bold; }
            .cancel-btn{ width: 20px; height: 20px; }
            .cancel-btn img { width: 20px; }
            .check-body { display: flex; align-items: center; justify-content: center; height: 65px; }
            .check-result-area { font-size: 12px; height: 30px; display: flex; align-items: center; justify-content: center; }
            .check-btn-area { display: flex; align-items: center; justify-content: center; height: 65px; }
            .check-btn { text-align: center; font-size: 12px; font-weight: bold; color: #fff; border-radius: 20px; background-color: #00AF80; width: 100px; height: 40px; }
            select { 
                -webkit-appearance: none;
                background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ5MS45OTYgNDkxLjk5NiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDkxLjk5NiA0OTEuOTk2OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiPjxnPjxnPgoJPGc+CgkJPHBhdGggZD0iTTQ4NC4xMzIsMTI0Ljk4NmwtMTYuMTE2LTE2LjIyOGMtNS4wNzItNS4wNjgtMTEuODItNy44Ni0xOS4wMzItNy44NmMtNy4yMDgsMC0xMy45NjQsMi43OTItMTkuMDM2LDcuODZsLTE4My44NCwxODMuODQ4ICAgIEw2Mi4wNTYsMTA4LjU1NGMtNS4wNjQtNS4wNjgtMTEuODItNy44NTYtMTkuMDI4LTcuODU2cy0xMy45NjgsMi43ODgtMTkuMDM2LDcuODU2bC0xNi4xMiwxNi4xMjggICAgYy0xMC40OTYsMTAuNDg4LTEwLjQ5NiwyNy41NzIsMCwzOC4wNmwyMTkuMTM2LDIxOS45MjRjNS4wNjQsNS4wNjQsMTEuODEyLDguNjMyLDE5LjA4NCw4LjYzMmgwLjA4NCAgICBjNy4yMTIsMCwxMy45Ni0zLjU3MiwxOS4wMjQtOC42MzJsMjE4LjkzMi0yMTkuMzI4YzUuMDcyLTUuMDY0LDcuODU2LTEyLjAxNiw3Ljg2NC0xOS4yMjQgICAgQzQ5MS45OTYsMTM2LjkwMiw0ODkuMjA0LDEzMC4wNDYsNDg0LjEzMiwxMjQuOTg2eiIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBkYXRhLW9sZF9jb2xvcj0iIzAwMDAwMCIgc3R5bGU9ImZpbGw6IzAwQUY4MCI+PC9wYXRoPgoJPC9nPgo8L2c+PC9nPiA8L3N2Zz4=') no-repeat 95% 50%;
                background-size: 10px;
                width: 200px;
                height: 40px;
                border-radius: 10px;
                border: 1px solid #00AF80;
                padding: 8px;
                font-size: 12px;
            }
            select:focus { outline: none; }
        </style>
        <script>
            // 연도 동적으로 추가하는 함수입니다
            function appendYear() {
                var date = new Date();
                var year = date.getFullYear();

                for(var i = year; i >= 1900; i--) {
                    $('#check-year').append('<option value="' + i + '">' + i + '년생</option>');
                }
            }

            // 요일을 구하는 함수입니다
            function WhatDay() {
                var d = new Date();
                var date = d.getDay();

                return date;
            }

            // 마스크 구매 가능 여부를 확인하는 함수입니다
            function check_mask(year, day) {
                if(year === 'x') {
                    return null;
                }

                if(day === 6 || day === 0) {
                    return true;
                }

                var mask = new Array(10);

                mask[0] = '5';
                mask[1] = '1';
                mask[2] = '2';
                mask[3] = '3';
                mask[4] = '4';
                mask[5] = '5';
                mask[6] = '1';
                mask[7] = '2';
                mask[8] = '3';
                mask[9] = '4';

                if(mask[year] == day) {
                    return true;
                } else {
                    return false;
                }
            }

            // 마스크 구매 가능 여부 확인창에서 버튼을 눌렀을 때 호출되는 함수입니다
            function check_btn() {
                var ch = $('#check-year option:selected').val();
                var year = ch.substr(3, 1);
                var day = WhatDay();
                var msg = document.getElementById('msg');
                var message = '';

                var result = check_mask(year, day);

                if(result === null) {
                    message = "출생연도를 선택해주세요!";
                } else if(result) {
                    message = "마스크 구매 가능한 날입니다!";
                } else {
                    message = "마스크를 구매할 수 없는 날입니다!";
                }

                msg.innerHTML = message;
            }

            // 마스크 구매 가능 여부 확인창에서 'x' 버튼을 눌렀을 때 호출되는 함수입니다
            function cancel() {
                var bg = document.getElementById('check-bg');
                var check = document.getElementById('check');

                bg.style.display = 'none';
                check.style.display = 'none';
            }

            // 마커 색 안내 탭에서 확인하기 메뉴를 눌렀을 때 호출되는 함수입니다
            function view() {
                var bg = document.getElementById('check-bg');
                var check = document.getElementById('check');

                bg.style.display = 'block';
                check.style.display = 'block';
            }
        </script>
    </head>
    <body onload="appendYear();">
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a5cabe51c4046f893babe8d3addb4e9f&libraries=services,clusterer,drawing"></script>
        <div class="check-bg" id="check-bg"></div>
        <div class="check" id="check">
            <div class="check-header">
                <div class="header-msg">출생연도를 통해<br>마스크 구매 가능 여부를 확인하세요!</div>
                <button class="cancel-btn" onclick="cancel()">
                    <img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQ5MiA0OTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ5MiA0OTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgY2xhc3M9ImhvdmVyZWQtcGF0aHMiPjxnPjxnPgoJPGc+CgkJPHBhdGggZD0iTTMwMC4xODgsMjQ2TDQ4NC4xNCw2Mi4wNGM1LjA2LTUuMDY0LDcuODUyLTExLjgyLDcuODYtMTkuMDI0YzAtNy4yMDgtMi43OTItMTMuOTcyLTcuODYtMTkuMDI4TDQ2OC4wMiw3Ljg3MiAgICBjLTUuMDY4LTUuMDc2LTExLjgyNC03Ljg1Ni0xOS4wMzYtNy44NTZjLTcuMiwwLTEzLjk1NiwyLjc4LTE5LjAyNCw3Ljg1NkwyNDYuMDA4LDE5MS44Mkw2Mi4wNDgsNy44NzIgICAgYy01LjA2LTUuMDc2LTExLjgyLTcuODU2LTE5LjAyOC03Ljg1NmMtNy4yLDAtMTMuOTYsMi43OC0xOS4wMiw3Ljg1Nkw3Ljg3MiwyMy45ODhjLTEwLjQ5NiwxMC40OTYtMTAuNDk2LDI3LjU2OCwwLDM4LjA1MiAgICBMMTkxLjgyOCwyNDZMNy44NzIsNDI5Ljk1MmMtNS4wNjQsNS4wNzItNy44NTIsMTEuODI4LTcuODUyLDE5LjAzMmMwLDcuMjA0LDIuNzg4LDEzLjk2LDcuODUyLDE5LjAyOGwxNi4xMjQsMTYuMTE2ICAgIGM1LjA2LDUuMDcyLDExLjgyNCw3Ljg1NiwxOS4wMiw3Ljg1NmM3LjIwOCwwLDEzLjk2OC0yLjc4NCwxOS4wMjgtNy44NTZsMTgzLjk2LTE4My45NTJsMTgzLjk1MiwxODMuOTUyICAgIGM1LjA2OCw1LjA3MiwxMS44MjQsNy44NTYsMTkuMDI0LDcuODU2aDAuMDA4YzcuMjA0LDAsMTMuOTYtMi43ODQsMTkuMDI4LTcuODU2bDE2LjEyLTE2LjExNiAgICBjNS4wNi01LjA2NCw3Ljg1Mi0xMS44MjQsNy44NTItMTkuMDI4YzAtNy4yMDQtMi43OTItMTMuOTYtNy44NTItMTkuMDI4TDMwMC4xODgsMjQ2eiIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImhvdmVyZWQtcGF0aCBhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6I0ZGRkZGRiIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+'>
                </button>
            </div>
            <div class="check-body">
                <select id="check-year">
                    <option value="xxxx">출생연도 선택</option>
                </select>
            </div>
            <div class="check-result-area" id="msg">
                출생연도를 선택하고 버튼을 눌러주세요!
            </div>
            <div class="check-btn-area" onclick="check_btn()">
                <button class="check-btn">확인하기</button>
            </div>
        </div>
        <div class="map_wrap">
            <ul class="info">
                <li>
                    <img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTUzLjc1NSwwLDcwLjU3Myw4My4xODIsNzAuNTczLDE4NS40MjZjMCwxMjYuODg4LDE2NS45MzksMzEzLjE2NywxNzMuMDA0LDMyMS4wMzUgICAgYzYuNjM2LDcuMzkxLDE4LjIyMiw3LjM3OCwyNC44NDYsMGM3LjA2NS03Ljg2OCwxNzMuMDA0LTE5NC4xNDcsMTczLjAwNC0zMjEuMDM1QzQ0MS40MjUsODMuMTgyLDM1OC4yNDQsMCwyNTYsMHogTTI1NiwyNzguNzE5ICAgIGMtNTEuNDQyLDAtOTMuMjkyLTQxLjg1MS05My4yOTItOTMuMjkzUzIwNC41NTksOTIuMTM0LDI1Niw5Mi4xMzRzOTMuMjkxLDQxLjg1MSw5My4yOTEsOTMuMjkzUzMwNy40NDEsMjc4LjcxOSwyNTYsMjc4LjcxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmaWxsOiMwMEFGODAiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+'>
                    100개 이상
                </li>
                <li>
                    <img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTUzLjc1NSwwLDcwLjU3Myw4My4xODIsNzAuNTczLDE4NS40MjZjMCwxMjYuODg4LDE2NS45MzksMzEzLjE2NywxNzMuMDA0LDMyMS4wMzUgICAgYzYuNjM2LDcuMzkxLDE4LjIyMiw3LjM3OCwyNC44NDYsMGM3LjA2NS03Ljg2OCwxNzMuMDA0LTE5NC4xNDcsMTczLjAwNC0zMjEuMDM1QzQ0MS40MjUsODMuMTgyLDM1OC4yNDQsMCwyNTYsMHogTTI1NiwyNzguNzE5ICAgIGMtNTEuNDQyLDAtOTMuMjkyLTQxLjg1MS05My4yOTItOTMuMjkzUzIwNC41NTksOTIuMTM0LDI1Niw5Mi4xMzRzOTMuMjkxLDQxLjg1MSw5My4yOTEsOTMuMjkzUzMwNy40NDEsMjc4LjcxOSwyNTYsMjc4LjcxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmaWxsOiNGRkNFMDAiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+'>
                    30~99개
                </li>
                <li>
                    <img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTUzLjc1NSwwLDcwLjU3Myw4My4xODIsNzAuNTczLDE4NS40MjZjMCwxMjYuODg4LDE2NS45MzksMzEzLjE2NywxNzMuMDA0LDMyMS4wMzUgICAgYzYuNjM2LDcuMzkxLDE4LjIyMiw3LjM3OCwyNC44NDYsMGM3LjA2NS03Ljg2OCwxNzMuMDA0LTE5NC4xNDcsMTczLjAwNC0zMjEuMDM1QzQ0MS40MjUsODMuMTgyLDM1OC4yNDQsMCwyNTYsMHogTTI1NiwyNzguNzE5ICAgIGMtNTEuNDQyLDAtOTMuMjkyLTQxLjg1MS05My4yOTItOTMuMjkzUzIwNC41NTksOTIuMTM0LDI1Niw5Mi4xMzRzOTMuMjkxLDQxLjg1MSw5My4yOTEsOTMuMjkzUzMwNy40NDEsMjc4LjcxOSwyNTYsMjc4LjcxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmaWxsOiNGQjUyNTIiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+'>
                    2~29개
                </li>
                <li>
                    <img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTUzLjc1NSwwLDcwLjU3Myw4My4xODIsNzAuNTczLDE4NS40MjZjMCwxMjYuODg4LDE2NS45MzksMzEzLjE2NywxNzMuMDA0LDMyMS4wMzUgICAgYzYuNjM2LDcuMzkxLDE4LjIyMiw3LjM3OCwyNC44NDYsMGM3LjA2NS03Ljg2OCwxNzMuMDA0LTE5NC4xNDcsMTczLjAwNC0zMjEuMDM1QzQ0MS40MjUsODMuMTgyLDM1OC4yNDQsMCwyNTYsMHogTTI1NiwyNzguNzE5ICAgIGMtNTEuNDQyLDAtOTMuMjkyLTQxLjg1MS05My4yOTItOTMuMjkzUzIwNC41NTksOTIuMTM0LDI1Niw5Mi4xMzRzOTMuMjkxLDQxLjg1MSw5My4yOTEsOTMuMjkzUzMwNy40NDEsMjc4LjcxOSwyNTYsMjc4LjcxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmaWxsOiM4NDg0ODQiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+'>
                    재고없음
                </li>
                <li class="mask-chk" onclick="view()">
                    <img src='data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMjEuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPgo8Zz4KCTxwYXRoIGQ9Ik0zNDYuOTM5LDE5NS41OWMtMzEuODY3LTEuOTk5LTYwLjEyNC0xMS4zLTgxLjcxNy0yNi44OTZjLTUuMTc2LTMuNzM4LTEyLjE1LTMuNzkxLTE3LjM4Mi0wLjEzICAgYy0yMi40MjUsMTUuNjkxLTUxLjA1LDI1LjAzNy04Mi43NzksMjcuMDI2Yy04LjI2OCwwLjUxOS0xNC41NSw3LjY0Mi0xNC4wMzIsMTUuOTFjMC40OTksNy45NDgsNy4xMDEsMTQuMDYyLDE0Ljk1NywxNC4wNjIgICBjMC4zMTUsMCwwLjYzNC0wLjAxLDAuOTUzLTAuMDNjMzMuMzI0LTIuMDksNjMuOTk3LTExLjI4MSw4OS4zODgtMjYuNzA0YzI0Ljc4MiwxNS40MTIsNTUuMjI0LDI0LjYwMiw4OC43MzQsMjYuNzA0ICAgYzguMjcsMC41MDksMTUuMzkxLTUuNzY0LDE1LjkxLTE0LjAzMUMzNjEuNDg5LDIwMy4yMzIsMzU1LjIwNywxOTYuMTA5LDM0Ni45MzksMTk1LjU5eiIgZmlsbD0iIzAwMDAwMCIvPgoJPHBhdGggZD0iTTMxNiwyNTZIMTk2Yy04LjI4NCwwLTE1LDYuNzE2LTE1LDE1czYuNzE2LDE1LDE1LDE1aDEyMGM4LjI4NCwwLDE1LTYuNzE2LDE1LTE1UzMyNC4yODQsMjU2LDMxNiwyNTZ6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8cGF0aCBkPSJNNTEyLDI0MWMwLTU3Ljg5Ny00Ny4xMDMtMTA1LTEwNS0xMDVoLTQ2LjgzNWMtMjQuNzkzLDAtNDYuMDk5LTUuNzM5LTYxLjYxNi0xNi41OTZDMjg2LjAxNiwxMTAuNjM1LDI3MS4zMDIsMTA2LDI1NiwxMDYgICBjLTE1LjMwMiwwLTMwLjAxNSw0LjYzNS00Mi41NDksMTMuNDA0QzE5Ny45MzQsMTMwLjI2MSwxNzYuNjI4LDEzNiwxNTEuODM1LDEzNkgxMDVDNDcuMTAzLDEzNiwwLDE4My4xMDMsMCwyNDEgICBjMCw1Ni4wMTYsNDQuMDkzLDEwMS45MjYsOTkuMzkzLDEwNC44NUMxMTYuMjQ3LDM1OS40MjcsMTc5LjYyOSw0MDYsMjU2LDQwNmM3Ni4zNywwLDEzOS43NTMtNDYuNTczLDE1Ni42MDYtNjAuMTUgICBDNDY3LjkwNywzNDIuOTI2LDUxMiwyOTcuMDE2LDUxMiwyNDF6IE0zMCwyNDFjMC0zNi4yMTksMjUuODA4LTY2LjUyMiw2MC03My40OTF2MTQ2Ljk4MUM1NS44MDgsMzA3LjUyMiwzMCwyNzcuMjE5LDMwLDI0MXogICAgTTEyMCwzMjMuODYyVjE2NmgzMS44MzVjMzEuNDIsMCw1Ny45MzctNy40MDcsNzguODE0LTIyLjAxNUMyMzguMTE2LDEzOC43NjEsMjQ2Ljg4MiwxMzYsMjU2LDEzNiAgIGM5LjExOCwwLDE3Ljg4NCwyLjc2MSwyNS4zNTEsNy45ODVDMzAyLjIyOSwxNTguNTkzLDMyOC43NDUsMTY2LDM2MC4xNjUsMTY2SDM5MnYxNTcuODYyQzM3NS4yOTcsMzM2Ljg1NiwzMTkuNjg0LDM3NiwyNTYsMzc2ICAgUzEzNi43MDMsMzM2Ljg1NiwxMjAsMzIzLjg2MnogTTQyMiwzMTQuNDkxVjE2Ny41MDljMzQuMTkyLDYuOTY4LDYwLDM3LjI3MSw2MCw3My40OTFTNDU2LjE5MiwzMDcuNTIyLDQyMiwzMTQuNDkxeiIgZmlsbD0iIzAwMDAwMCIvPgoJPHBhdGggZD0iTTI4NiwzMTZoLTYwYy04LjI4NCwwLTE1LDYuNzE2LTE1LDE1czYuNzE2LDE1LDE1LDE1aDYwYzguMjg0LDAsMTUtNi43MTYsMTUtMTVTMjk0LjI4NCwzMTYsMjg2LDMxNnoiIGZpbGw9IiMwMDAwMDAiLz4KPC9nPgoKCgoKCgoKCgoKCgoKCgo8L3N2Zz4K'>
                    <div class="hid">구매 가능 여부</div>
                    <div class="mask-check-msg">확인하기</div>
                </li>
            </ul>
            <div class="search-warp">
                <div class="search">
                    <input type="text" id="search" class="place" onkeyup="enterkey();" placeholder="장소를 검색하세요" autocomplete="off">
                    <button class="search-btn" onclick="buttonPress();">
                        <img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTExLjk5OSA1MTEuOTk5IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTEuOTk5IDUxMS45OTk7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNNTA4Ljg3NCw0NzguNzA4TDM2MC4xNDIsMzI5Ljk3NmMyOC4yMS0zNC44MjcsNDUuMTkxLTc5LjEwMyw0NS4xOTEtMTI3LjMwOWMwLTExMS43NS05MC45MTctMjAyLjY2Ny0yMDIuNjY3LTIwMi42NjcgICAgUzAsOTAuOTE3LDAsMjAyLjY2N3M5MC45MTcsMjAyLjY2NywyMDIuNjY3LDIwMi42NjdjNDguMjA2LDAsOTIuNDgyLTE2Ljk4MiwxMjcuMzA5LTQ1LjE5MWwxNDguNzMyLDE0OC43MzIgICAgYzQuMTY3LDQuMTY1LDEwLjkxOSw0LjE2NSwxNS4wODYsMGwxNS4wODEtMTUuMDgyQzUxMy4wNCw0ODkuNjI3LDUxMy4wNCw0ODIuODczLDUwOC44NzQsNDc4LjcwOHogTTIwMi42NjcsMzYyLjY2NyAgICBjLTg4LjIyOSwwLTE2MC03MS43NzEtMTYwLTE2MHM3MS43NzEtMTYwLDE2MC0xNjBzMTYwLDcxLjc3MSwxNjAsMTYwUzI5MC44OTYsMzYyLjY2NywyMDIuNjY3LDM2Mi42Njd6IiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiM5MDkwOTAiIGRhdGEtb2xkX2NvbG9yPSIjMDAwMDAwIj48L3BhdGg+Cgk8L2c+CjwvZz48L2c+IDwvc3ZnPg=='>
                    </button>
                </div>
            </div>
            <div id="map" class="map"></div>
        </div>
        <script>
            var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
            
            // 정읍 시청의 좌표
            var latitude = 35.5698504;      // 위도
            var longitude = 126.8538471;    // 경도

            // geolocation을 사용할 수 있는지 확인합니다.
            if(navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {   // geolocation을 이용해서 접속 위치를 얻어옵니다.
                    latitude = position.coords.latitude;
                    longitude = position.coords.longitude;

                    var locPosition = new kakao.maps.LatLng(latitude, longitude);
                    map.setCenter(locPosition);
                });
            } else {
                console.log("geolocaion을 사용할 수 없습니다.");
            }

            var options = { //지도를 생성할 때 필요한 기본 옵션
                center: new kakao.maps.LatLng(latitude, longitude), //지도의 중심좌표.
                level: 3 //지도의 레벨(확대, 축소 정도)
            };

            function httpGetAsync(theUrl, callback) {
                var xmlHttp = new XMLHttpRequest();
                xmlHttp.onreadystatechange = function() { 
                    if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                        callback(xmlHttp.responseText);
                }
                xmlHttp.open("GET", theUrl, true); // true for asynchronous 
                xmlHttp.send(null);
            }

            function requestAPI(response) {
                console.log(response);
                var stock = {
                    empty: '재고 없음',
                    few: '2~29개',
                    some: '30~99개',
                    plenty: '100개~',
                    break: '판매중지',
                    null: '정보없음',
                }

                var stockImg = {
                    empty: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTUzLjc1NSwwLDcwLjU3Myw4My4xODIsNzAuNTczLDE4NS40MjZjMCwxMjYuODg4LDE2NS45MzksMzEzLjE2NywxNzMuMDA0LDMyMS4wMzUgICAgYzYuNjM2LDcuMzkxLDE4LjIyMiw3LjM3OCwyNC44NDYsMGM3LjA2NS03Ljg2OCwxNzMuMDA0LTE5NC4xNDcsMTczLjAwNC0zMjEuMDM1QzQ0MS40MjUsODMuMTgyLDM1OC4yNDQsMCwyNTYsMHogTTI1NiwyNzguNzE5ICAgIGMtNTEuNDQyLDAtOTMuMjkyLTQxLjg1MS05My4yOTItOTMuMjkzUzIwNC41NTksOTIuMTM0LDI1Niw5Mi4xMzRzOTMuMjkxLDQxLjg1MSw5My4yOTEsOTMuMjkzUzMwNy40NDEsMjc4LjcxOSwyNTYsMjc4LjcxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmaWxsOiM4NDg0ODQiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+',
                    few: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTUzLjc1NSwwLDcwLjU3Myw4My4xODIsNzAuNTczLDE4NS40MjZjMCwxMjYuODg4LDE2NS45MzksMzEzLjE2NywxNzMuMDA0LDMyMS4wMzUgICAgYzYuNjM2LDcuMzkxLDE4LjIyMiw3LjM3OCwyNC44NDYsMGM3LjA2NS03Ljg2OCwxNzMuMDA0LTE5NC4xNDcsMTczLjAwNC0zMjEuMDM1QzQ0MS40MjUsODMuMTgyLDM1OC4yNDQsMCwyNTYsMHogTTI1NiwyNzguNzE5ICAgIGMtNTEuNDQyLDAtOTMuMjkyLTQxLjg1MS05My4yOTItOTMuMjkzUzIwNC41NTksOTIuMTM0LDI1Niw5Mi4xMzRzOTMuMjkxLDQxLjg1MSw5My4yOTEsOTMuMjkzUzMwNy40NDEsMjc4LjcxOSwyNTYsMjc4LjcxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmaWxsOiNGQjUyNTIiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+',
                    some: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTUzLjc1NSwwLDcwLjU3Myw4My4xODIsNzAuNTczLDE4NS40MjZjMCwxMjYuODg4LDE2NS45MzksMzEzLjE2NywxNzMuMDA0LDMyMS4wMzUgICAgYzYuNjM2LDcuMzkxLDE4LjIyMiw3LjM3OCwyNC44NDYsMGM3LjA2NS03Ljg2OCwxNzMuMDA0LTE5NC4xNDcsMTczLjAwNC0zMjEuMDM1QzQ0MS40MjUsODMuMTgyLDM1OC4yNDQsMCwyNTYsMHogTTI1NiwyNzguNzE5ICAgIGMtNTEuNDQyLDAtOTMuMjkyLTQxLjg1MS05My4yOTItOTMuMjkzUzIwNC41NTksOTIuMTM0LDI1Niw5Mi4xMzRzOTMuMjkxLDQxLjg1MSw5My4yOTEsOTMuMjkzUzMwNy40NDEsMjc4LjcxOSwyNTYsMjc4LjcxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmaWxsOiNGRkNFMDAiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+',
                    plenty: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTUzLjc1NSwwLDcwLjU3Myw4My4xODIsNzAuNTczLDE4NS40MjZjMCwxMjYuODg4LDE2NS45MzksMzEzLjE2NywxNzMuMDA0LDMyMS4wMzUgICAgYzYuNjM2LDcuMzkxLDE4LjIyMiw3LjM3OCwyNC44NDYsMGM3LjA2NS03Ljg2OCwxNzMuMDA0LTE5NC4xNDcsMTczLjAwNC0zMjEuMDM1QzQ0MS40MjUsODMuMTgyLDM1OC4yNDQsMCwyNTYsMHogTTI1NiwyNzguNzE5ICAgIGMtNTEuNDQyLDAtOTMuMjkyLTQxLjg1MS05My4yOTItOTMuMjkzUzIwNC41NTksOTIuMTM0LDI1Niw5Mi4xMzRzOTMuMjkxLDQxLjg1MSw5My4yOTEsOTMuMjkzUzMwNy40NDEsMjc4LjcxOSwyNTYsMjc4LjcxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmaWxsOiMwMEFGODAiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+',
                    break: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTUzLjc1NSwwLDcwLjU3Myw4My4xODIsNzAuNTczLDE4NS40MjZjMCwxMjYuODg4LDE2NS45MzksMzEzLjE2NywxNzMuMDA0LDMyMS4wMzUgICAgYzYuNjM2LDcuMzkxLDE4LjIyMiw3LjM3OCwyNC44NDYsMGM3LjA2NS03Ljg2OCwxNzMuMDA0LTE5NC4xNDcsMTczLjAwNC0zMjEuMDM1QzQ0MS40MjUsODMuMTgyLDM1OC4yNDQsMCwyNTYsMHogTTI1NiwyNzguNzE5ICAgIGMtNTEuNDQyLDAtOTMuMjkyLTQxLjg1MS05My4yOTItOTMuMjkzUzIwNC41NTksOTIuMTM0LDI1Niw5Mi4xMzRzOTMuMjkxLDQxLjg1MSw5My4yOTEsOTMuMjkzUzMwNy40NDEsMjc4LjcxOSwyNTYsMjc4LjcxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmaWxsOiM4NDg0ODQiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+',
                    null: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiI+PGc+PGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU2LDBDMTUzLjc1NSwwLDcwLjU3Myw4My4xODIsNzAuNTczLDE4NS40MjZjMCwxMjYuODg4LDE2NS45MzksMzEzLjE2NywxNzMuMDA0LDMyMS4wMzUgICAgYzYuNjM2LDcuMzkxLDE4LjIyMiw3LjM3OCwyNC44NDYsMGM3LjA2NS03Ljg2OCwxNzMuMDA0LTE5NC4xNDcsMTczLjAwNC0zMjEuMDM1QzQ0MS40MjUsODMuMTgyLDM1OC4yNDQsMCwyNTYsMHogTTI1NiwyNzguNzE5ICAgIGMtNTEuNDQyLDAtOTMuMjkyLTQxLjg1MS05My4yOTItOTMuMjkzUzIwNC41NTksOTIuMTM0LDI1Niw5Mi4xMzRzOTMuMjkxLDQxLjg1MSw5My4yOTEsOTMuMjkzUzMwNy40NDEsMjc4LjcxOSwyNTYsMjc4LjcxOXoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiIHN0eWxlPSJmaWxsOiM4NDg0ODQiPjwvcGF0aD4KCTwvZz4KPC9nPjwvZz4gPC9zdmc+',
                }

                // 마커를 표시할 위치와 title 객체 배열입니다 
                var response = JSON.parse(response);    // JSON 객체로 변환
                var positions = [];

                for(var i = 0; i < response['stores'].length; i++) {
                    positions.push( {
                        title: response['stores'][i]['name'],
                        latlng: new kakao.maps.LatLng(response['stores'][i]['lat'], response['stores'][i]['lng']),
                        content: response['stores'][i]['name'] + '<br>재고 : ' + stock[response['stores'][i]['remain_stat']]
                        + '<br>입고 시간 : ' + response['stores'][i]['stock_at']
                        + '<br>업데이트 시간 : ' + response['stores'][i]['created_at'],
                        imginfo: stockImg[response['stores'][i]['remain_stat']],
                    });
                }
                    
                for (var i = 0; i < positions.length; i ++) {
                    // 마커 이미지의 이미지 주소입니다
                    // 재고에 따라 마커 이미지 색상이 변경됩니다.
                    var imageSrc = positions[i].imginfo;

                    // 마커 이미지의 이미지 크기 입니다
                    var imageSize = new kakao.maps.Size(24, 35); 
                    
                    // 마커 이미지를 생성합니다    
                    var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 
                    
                    // 마커를 생성합니다
                    var marker = new kakao.maps.Marker({
                        map: map, // 마커를 표시할 지도
                        position: positions[i].latlng, // 마커를 표시할 위치
                        title : positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
                        image : markerImage // 마커 이미지 
                    });

                    // 마커에 표시할 인포윈도우를 생성합니다 
                    var infowindow = new kakao.maps.InfoWindow({
                        content: positions[i].content // 인포윈도우에 표시할 내용
                    });

                    // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
                    // 이벤트 리스너로는 클로저를 만들어 등록합니다 
                    // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
                    kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
                    kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
                }
            }

            // 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
            function makeOverListener(map, marker, infowindow) {
                return function() {
                    infowindow.open(map, marker);
                };
            }

            // 인포윈도우를 닫는 클로저를 만드는 함수입니다 
            function makeOutListener(infowindow) {
                return function() {
                    infowindow.close();
                };
            }

            // 엔터가 눌렸을 때 실행되는 함수입니다
            function enterkey() {
                if (window.event.keyCode == 13) {
                    // 장소를 검색합니다
                    searchPlace();
                }
            }

            // 검색 버튼이 눌렸을 때 실행되는 함수입니다
            function buttonPress() {
                // 장소를 검색합니다
                searchPlace();
            }

            // 장소 검색 객체를 생성합니다
            var ps = new kakao.maps.services.Places();

            // 검색을 요청하는 함수입니다
            function searchPlace() {
                var keyword = document.getElementById('search').value;

                // 검색어를 입력하지 않고 엔터나 검색 버튼을 눌렀을 때 실행
                if(!keyword.trim()) {
                    alert('검색어를 입력해주세요!');

                    return false;
                }

                // 장소 검색 객체를 통해 장소 검색을 요청합니다
                ps.keywordSearch(keyword, placeSearchCB);
            }

            // 장소 검색이 완료되었을 때 호출되는 콜백함수입니다
            function placeSearchCB(data, status, pagination) {
                if(status === kakao.maps.services.Status.OK) {
                    // 정상적으로 검색이 완료 됐으면 검색 목록을 반환합니다
                    PlacesData(data);
                } else if(status === kakao.maps.services.Status.ZERO_RESULT) {
                    alert('검색 결과가 존재하지 않습니다.');

                    return;
                } else if(status === kakao.maps.services.Status.ERROR) {
                    alert('검색 중 오류가 발생했습니다.');

                    return;
                }
            }

            // 검색 결과 목록을 나타내는 함수입니다
            function PlacesData(places) {
                var bounds = new kakao.maps.LatLngBounds();
                var placePosition = new kakao.maps.LatLng(places[0].y, places[0].x);

                // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기 위해 LatLngBounds 객체에 좌표를 추가
                bounds.extend(placePosition);

                for(var i = 0; i < places.length; i++) {
                    console.log(places[i]);
                }

                map.setBounds(bounds);
            }

            var default_lat = latitude;
            var default_lng = longitude;
            var lat = default_lat;
            var lng = default_lng;
            var urlString = "https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByGeo/json?lat="+lat+"&lng="+lng+"&m=2000";
            httpGetAsync(urlString, requestAPI);

            var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴

            // 지도가 이동, 확대, 축소로 인해 중심좌표가 변경되면 마지막 파라미터로 넘어온 함수를 호출하도록 이벤트를 등록합니다
            kakao.maps.event.addListener(map, 'dragend', function() {
            var latlng = map.getCenter();   // 지도의 중심좌표를 얻어옵니다 
            lat = latlng.getLat();
            lng = latlng.getLng();
            urlString = "https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByGeo/json?lat="+lat+"&lng="+lng+"&m=2000";
            httpGetAsync(urlString, requestAPI);

            });
            </script>
    </body>
</html>